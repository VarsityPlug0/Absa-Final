<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PIN Entry - ABSA Bank</title>
  <style>
    :root {
      --primary: #e4002b;
      --accent: #ff6600;
      --border: #ddd;
      --text-dark: #333;
      --text-light: #666;
    }

    body {
      margin: 0;
      font-family: "Segoe UI", Arial, sans-serif;
      background: #fff;
      color: var(--text-dark);
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px 30px;
      border-bottom: 1px solid var(--border);
    }

    header img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      background: var(--primary);
    }

    header nav a {
      margin-left: 20px;
      font-size: 13px;
      color: var(--text-dark);
      text-decoration: none;
    }

    .container {
      max-width: 960px;
      margin: 20px auto;
      padding: 0 20px;
    }

    .progress {
      display: flex;
      align-items: center;
      margin-bottom: 30px;
    }

    .progress-step {
      flex: 1;
      position: relative;
      text-align: center;
      font-size: 13px;
      color: var(--text-light);
    }

    .progress-step::before {
      content: "";
      display: block;
      width: 100%;
      height: 3px;
      background: var(--border);
      position: absolute;
      top: 8px;
      left: -50%;
      z-index: -1;
    }

    .progress-step:first-child::before {
      display: none;
    }

    .progress-step.active {
      color: var(--primary);
      font-weight: bold;
    }

    .progress-step.active::before {
      background: var(--primary);
    }

    .progress-step.completed {
      color: var(--primary);
    }

    .progress-step.completed::before {
      background: var(--primary);
    }

    .progress-step span {
      display: inline-block;
      width: 20px;
      height: 20px;
      line-height: 20px;
      border-radius: 50%;
      background: var(--primary);
      color: #fff;
      font-size: 12px;
      margin-bottom: 5px;
    }

    h2 {
      font-size: 20px;
      margin-bottom: 20px;
      font-weight: normal;
    }

    .pin-container {
      background: #fff;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      border: 1px solid var(--border);
      text-align: center;
      max-width: 500px;
      margin: 0 auto;
    }

    .account-info {
      background: #f8f9fa;
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 15px;
      margin-bottom: 25px;
      text-align: left;
    }

    .account-info h3 {
      margin: 0 0 8px 0;
      color: var(--primary);
      font-size: 16px;
    }

    .account-info p {
      margin: 0;
      font-size: 14px;
      color: var(--text-dark);
      font-family: 'Courier New', monospace;
    }

    .pin-instruction {
      font-size: 18px;
      color: var(--text-dark);
      margin-bottom: 25px;
      font-weight: 500;
    }

    .pin-boxes {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin: 25px 0;
    }

    .pin-boxes input {
      width: 60px;
      height: 60px;
      font-size: 28px;
      font-weight: bold;
      text-align: center;
      border: 3px solid var(--border);
      border-radius: 12px;
      background-color: #fafafa;
      transition: all 0.3s ease;
      outline: none;
      color: var(--text-dark);
      -webkit-text-security: disc;
      text-security: disc;
    }

    .pin-boxes input:focus {
      border-color: var(--primary);
      background-color: #fff;
      box-shadow: 0 0 0 4px rgba(228, 0, 43, 0.15);
      transform: scale(1.08);
    }

    .pin-boxes input:hover {
      border-color: var(--accent);
      background-color: #fff;
    }

    .pin-boxes input.filled {
      background-color: #e8f5e8;
      border-color: var(--primary);
    }

    .pin-hint {
      font-size: 14px;
      color: var(--text-light);
      margin-bottom: 25px;
      font-style: italic;
    }

    .security-features {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    .security-feature {
      display: flex;
      align-items: center;
      font-size: 12px;
      color: var(--text-light);
    }

    .security-feature::before {
      content: "ðŸ”’";
      margin-right: 5px;
    }

    .buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 30px;
    }

    .buttons .clear-pin {
      background: #fff;
      border: 2px solid var(--accent);
      color: var(--accent);
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
    }

    .buttons .submit-pin {
      background: var(--primary);
      color: #fff;
      border: none;
      padding: 12px 32px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
    }

    .buttons .submit-pin:hover {
      background: #c8002a;
    }

    .buttons .submit-pin:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .attempts-remaining {
      font-size: 13px;
      color: var(--accent);
      margin-top: 15px;
      font-weight: 500;
    }

    .error-message {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
      padding: 12px 15px;
      border-radius: 4px;
      margin-bottom: 15px;
      font-size: 14px;
    }

    .virtual-keyboard {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      max-width: 250px;
      margin: 20px auto 0;
    }

    .key-btn {
      background: #f8f9fa;
      border: 2px solid var(--border);
      border-radius: 8px;
      padding: 15px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .key-btn:hover {
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
    }

    .key-btn:active {
      transform: scale(0.95);
    }

    @media (max-width: 600px) {
      .pin-boxes {
        gap: 10px;
      }
      .pin-boxes input {
        width: 50px;
        height: 50px;
        font-size: 24px;
      }
      .security-features {
        flex-direction: column;
        align-items: center;
      }
      .buttons {
        flex-direction: column;
      }
      .buttons button {
        width: 100%;
      }
      .virtual-keyboard {
        max-width: 200px;
      }
      .key-btn {
        padding: 12px;
        font-size: 16px;
      }
    }
  </style>
</head>
<body>
  <header>
    <div style="width: 40px; height: 40px; background: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">A</div>
    <nav>
      <a href="#">Contact Us</a>
      <a href="#">Security</a>
      <a href="#">Privacy Policy</a>
    </nav>
  </header>

  <div class="container">
    <div class="progress">
      <div class="progress-step completed"><span>1</span><br>Account Details</div>
      <div class="progress-step completed"><span>2</span><br>SurePhrase Authentication</div>
      <div class="progress-step active"><span>3</span><br>PIN Entry</div>
      <div class="progress-step"><span>4</span><br>Access Granted</div>
    </div>

    <h2>Secure PIN Entry</h2>

    <div class="pin-container">
      <div class="account-info">
        <h3>Account Information</h3>
        <p>Account: ****1234</p>
        <p>User: John D. (Last login: Today 09:15)</p>
      </div>

      <div class="pin-instruction">
        Please enter your 5-digit PIN to continue
      </div>

      <form id="pinForm">
        <div class="pin-boxes">
          <input type="password" class="pin-input" maxlength="1" inputmode="numeric" pattern="[0-9]" autocomplete="off">
          <input type="password" class="pin-input" maxlength="1" inputmode="numeric" pattern="[0-9]" autocomplete="off">
          <input type="password" class="pin-input" maxlength="1" inputmode="numeric" pattern="[0-9]" autocomplete="off">
          <input type="password" class="pin-input" maxlength="1" inputmode="numeric" pattern="[0-9]" autocomplete="off">
          <input type="password" class="pin-input" maxlength="1" inputmode="numeric" pattern="[0-9]" autocomplete="off">
        </div>

        <div class="pin-hint">
          Use the virtual keyboard below or your physical keyboard
        </div>

        <div class="security-features">
          <div class="security-feature">256-bit Encryption</div>
          <div class="security-feature">Secure Connection</div>
          <div class="security-feature">Auto-logout Protection</div>
        </div>

        <div class="virtual-keyboard">
          <button type="button" class="key-btn" data-key="1">1</button>
          <button type="button" class="key-btn" data-key="2">2</button>
          <button type="button" class="key-btn" data-key="3">3</button>
          <button type="button" class="key-btn" data-key="4">4</button>
          <button type="button" class="key-btn" data-key="5">5</button>
          <button type="button" class="key-btn" data-key="6">6</button>
          <button type="button" class="key-btn" data-key="7">7</button>
          <button type="button" class="key-btn" data-key="8">8</button>
          <button type="button" class="key-btn" data-key="9">9</button>
          <button type="button" class="key-btn" data-key="clear">âŒ«</button>
          <button type="button" class="key-btn" data-key="0">0</button>
          <button type="button" class="key-btn" data-key="submit">âœ“</button>
        </div>

        <div class="buttons">
          <button type="button" class="clear-pin">Clear PIN</button>
          <button type="submit" class="submit-pin" disabled>Submit PIN</button>
        </div>

        <div class="attempts-remaining">
          Attempts remaining: <span id="attemptsLeft">3</span>
        </div>
      </form>
    </div>
  </div>

  <script>
    let currentInput = 0;
    let attempts = 3;
    const pinInputs = document.querySelectorAll('.pin-input');
    const submitBtn = document.querySelector('.submit-pin');
    const clearBtn = document.querySelector('.clear-pin');

    // Focus first input on load
    pinInputs[0].focus();

    // PIN input handling
    pinInputs.forEach((input, index) => {
      input.addEventListener('input', (e) => {
        const value = e.target.value.replace(/[^0-9]/g, '');
        e.target.value = value;
        
        if (value) {
          input.classList.add('filled');
          if (index < pinInputs.length - 1) {
            pinInputs[index + 1].focus();
            currentInput = index + 1;
          } else {
            currentInput = index;
          }
        } else {
          input.classList.remove('filled');
          currentInput = index;
        }
        
        checkPinComplete();
      });

      input.addEventListener('keydown', (e) => {
        if (e.key === 'Backspace') {
          if (input.value === '' && index > 0) {
            pinInputs[index - 1].focus();
            pinInputs[index - 1].value = '';
            pinInputs[index - 1].classList.remove('filled');
            currentInput = index - 1;
          } else {
            input.classList.remove('filled');
            currentInput = index;
          }
          checkPinComplete();
        }
        
        if (e.key === 'ArrowRight' && index < pinInputs.length - 1) {
          pinInputs[index + 1].focus();
          currentInput = index + 1;
        }
        if (e.key === 'ArrowLeft' && index > 0) {
          pinInputs[index - 1].focus();
          currentInput = index - 1;
        }
      });

      input.addEventListener('focus', () => {
        currentInput = index;
      });

      input.addEventListener('keypress', (e) => {
        if (!/[0-9]/.test(e.key) && !['Backspace', 'Delete', 'Tab', 'Enter'].includes(e.key)) {
          e.preventDefault();
        }
      });
    });

    // Virtual keyboard
    document.querySelectorAll('.key-btn').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        const key = btn.dataset.key;
        
        if (key === 'clear') {
          if (currentInput >= 0 && pinInputs[currentInput].value) {
            pinInputs[currentInput].value = '';
            pinInputs[currentInput].classList.remove('filled');
          } else if (currentInput > 0) {
            currentInput--;
            pinInputs[currentInput].value = '';
            pinInputs[currentInput].classList.remove('filled');
            pinInputs[currentInput].focus();
          }
        } else if (key === 'submit') {
          if (isPinComplete()) {
            document.getElementById('pinForm').dispatchEvent(new Event('submit'));
          }
        } else if (/[0-9]/.test(key)) {
          if (currentInput < pinInputs.length) {
            pinInputs[currentInput].value = key;
            pinInputs[currentInput].classList.add('filled');
            if (currentInput < pinInputs.length - 1) {
              currentInput++;
              pinInputs[currentInput].focus();
            }
          }
        }
        
        checkPinComplete();
      });
    });

    // Clear PIN button
    clearBtn.addEventListener('click', () => {
      pinInputs.forEach(input => {
        input.value = '';
        input.classList.remove('filled');
      });
      currentInput = 0;
      pinInputs[0].focus();
      checkPinComplete();
    });

    function isPinComplete() {
      return Array.from(pinInputs).every(input => input.value !== '');
    }

    function checkPinComplete() {
      submitBtn.disabled = !isPinComplete();
    }

    // Form submission
    document.getElementById('pinForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      if (!isPinComplete()) {
        showError('Please enter all 5 digits of your PIN');
        return;
      }
      
      const pin = Array.from(pinInputs).map(input => input.value).join('');
      
      // Show loading state
      submitBtn.textContent = 'Verifying...';
      submitBtn.disabled = true;
      
      // Simulate PIN verification
      setTimeout(() => {
        // Simulate different outcomes
        const isValid = Math.random() > 0.3; // 70% success rate for demo
        
        if (isValid) {
          showSuccess('PIN verified successfully! Redirecting to your account...');
          setTimeout(() => {
            window.location.href = 'account-access.html';
          }, 2000);
        } else {
          attempts--;
          document.getElementById('attemptsLeft').textContent = attempts;
          
          if (attempts > 0) {
            showError(`Incorrect PIN. ${attempts} attempt(s) remaining.`);
            clearPin();
          } else {
            showError('Maximum attempts exceeded. Your account has been temporarily locked.');
            lockAccount();
          }
        }
        
        submitBtn.textContent = 'Submit PIN';
        submitBtn.disabled = !isPinComplete();
      }, 2000);
    });

    function clearPin() {
      pinInputs.forEach(input => {
        input.value = '';
        input.classList.remove('filled');
      });
      currentInput = 0;
      pinInputs[0].focus();
      checkPinComplete();
    }

    function lockAccount() {
      pinInputs.forEach(input => input.disabled = true);
      document.querySelectorAll('.key-btn').forEach(btn => btn.disabled = true);
      submitBtn.disabled = true;
      clearBtn.disabled = true;
    }

    function showError(message) {
      const existing = document.querySelector('.error-message');
      if (existing) existing.remove();
      
      const errorDiv = document.createElement('div');
      errorDiv.className = 'error-message';
      errorDiv.textContent = message;
      
      const container = document.querySelector('.pin-container');
      container.insertBefore(errorDiv, container.firstChild);
    }

    function showSuccess(message) {
      const existing = document.querySelector('.error-message, .success-message');
      if (existing) existing.remove();
      
      const successDiv = document.createElement('div');
      successDiv.className = 'success-message';
      successDiv.style.background = '#d4edda';
      successDiv.style.color = '#155724';
      successDiv.style.border = '1px solid #c3e6cb';
      successDiv.style.padding = '12px 15px';
      successDiv.style.borderRadius = '4px';
      successDiv.style.marginBottom = '15px';
      successDiv.style.fontSize = '14px';
      successDiv.textContent = message;
      
      const container = document.querySelector('.pin-container');
      container.insertBefore(successDiv, container.firstChild);
    }

    // Auto-focus first empty input
    setInterval(() => {
      const firstEmpty = Array.from(pinInputs).findIndex(input => input.value === '');
      if (firstEmpty !== -1 && document.activeElement !== pinInputs[firstEmpty]) {
        currentInput = firstEmpty;
      }
    }, 1000);
  </script>
</body>
</html>